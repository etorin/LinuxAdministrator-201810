Last login: Wed Nov  7 18:02:15 2018 from 192.168.33.1
[vagrant@otuslinuxhw4 ~]$ sudo su -
Last login: Wed Nov  7 18:03:01 UTC 2018 on pts/0
[root@otuslinuxhw4 ~]# vgs
  VG     #PV #LV #SN Attr   VSize   VFree
  rootvg   1   2   0 wz--n- <38.97g    0 
  vg_var   2   1   0 wz--n-   2.99g 1.12g
[root@otuslinuxhw4 ~]# vgrename -v rootvg centos
    Wiping cache of LVM-capable devices
    Archiving volume group "rootvg" metadata (seqno 4).
    Writing out updated volume group
    Renaming "/dev/rootvg" to "/dev/centos"
    Loading table for rootvg-LogVol00 (253:0).
    Suppressed rootvg-LogVol00 (253:0) identical table reload.
    Suspending rootvg-LogVol00 (253:0) with device flush
    Loading table for rootvg-LogVol00 (253:0).
    Suppressed rootvg-LogVol00 (253:0) identical table reload.
    Renaming rootvg-LogVol00 (253:0) to centos-LogVol00
    Resuming centos-LogVol00 (253:0).
    Loading table for rootvg-LogVol01 (253:1).
    Suppressed rootvg-LogVol01 (253:1) identical table reload.
    Suspending rootvg-LogVol01 (253:1) with device flush
    Loading table for rootvg-LogVol01 (253:1).
    Suppressed rootvg-LogVol01 (253:1) identical table reload.
    Renaming rootvg-LogVol01 (253:1) to centos-LogVol01
    Resuming centos-LogVol01 (253:1).
    Creating volume group backup "/etc/lvm/backup/centos" (seqno 5).
  Volume group "rootvg" successfully renamed to "centos"
[root@otuslinuxhw4 ~]# 
[root@otuslinuxhw4 ~]# 
[root@otuslinuxhw4 ~]# 
[root@otuslinuxhw4 ~]# vgs
  VG     #PV #LV #SN Attr   VSize   VFree
  centos   1   2   0 wz--n- <38.97g    0 
  vg_var   2   1   0 wz--n-   2.99g 1.12g
[root@otuslinuxhw4 ~]# hostname hw4test
[root@otuslinuxhw4 ~]# hostnamectl set-hostname hw4test
[root@otuslinuxhw4 ~]# 
[root@otuslinuxhw4 ~]# 
[root@otuslinuxhw4 ~]# exit
logout
[vagrant@otuslinuxhw4 ~]$ exit
logout
Last login: Wed Nov  7 18:29:43 2018 from 192.168.33.1
[vagrant@hw4test ~]$ sudo root
sudo: root: command not found
[vagrant@hw4test ~]$ sudi=o -s root
-bash: -s: command not found
[vagrant@hw4test ~]$ sudo su -     
Last login: Wed Nov  7 18:29:49 UTC 2018 on pts/0
[root@hw4test ~]# sudo root
sudo: root: command not found
[root@hw4test ~]# 
[root@hw4test ~]# 
[root@hw4test ~]# 
[root@hw4test ~]# 
[root@hw4test ~]# 
[root@hw4test ~]# 
[root@hw4test ~]# 
[root@hw4test ~]# vgs
  VG     #PV #LV #SN Attr   VSize   VFree
  centos   1   2   0 wz--n- <38.97g    0 
  vg_var   2   1   0 wz--n-   2.99g 1.12g
[root@hw4test ~]# vgrename /dev/centos /dev/centos1
  Volume group "centos" successfully renamed to "centos1"
[root@hw4test ~]# vgrename centos centos1          
  /dev/centos1: already exists in filesystem
[root@hw4test ~]# vgs
  VG      #PV #LV #SN Attr   VSize   VFree
  centos1   1   2   0 wz--n- <38.97g    0 
  vg_var    2   1   0 wz--n-   2.99g 1.12g
[root@hw4test ~]# vgrename centos1 centos
  Volume group "centos1" successfully renamed to "centos"
[root@hw4test ~]# vgrename centos centos1           
  Volume group "centos" successfully renamed to "centos1"
[root@hw4test ~]# 
[root@hw4test ~]# 
[root@hw4test ~]# 
[root@hw4test ~]# vgs
  VG      #PV #LV #SN Attr   VSize   VFree
  centos1   1   2   0 wz--n- <38.97g    0 
  vg_var    2   1   0 wz--n-   2.99g 1.12g
[root@hw4test ~]# vi /etc/defaults/grub
[root@hw4test ~]# 
[root@hw4test ~]# 
[root@hw4test ~]# 
[root@hw4test ~]# vi /etc/default/grub 
GRUB_TIMEOUT=1
GRUB_DISTRIBUTOR="$(sed 's, release .*$,,g' /etc/system-release)"
GRUB_DEFAULT=saved
GRUB_DISABLE_SUBMENU=true
GRUB_TERMINAL_OUTPUT="console"
roup00/LogVol01 rhgb quiet"
GRUB_DISABLE_RECOVERY="true"
GRUB_TIMEOUT=1
GRUB_DISTRIBUTOR="$(sed 's, release .*$,,g' /etc/system-release)"
GRUB_DEFAULT=saved
GRUB_DISABLE_SUBMENU=true
GRUB_TERMINAL_OUTPUT="console"
GRUB_CMDLINE_LINUX="no_timer_check console=tty0 console=ttyS0,115200n8 net.ifnames=0 bi
osdevname=0 elevator=noop crashkernel=auto rd.lvm.lv=VolG/LogVol00 rd.lvm.lv=VolGroup00
osdevname=0 elevator=noop crashkernel=auto rd.lvm.lv=centos1/LogVol00 rd.lvm.lv=VolGrou
"/etc/default/grub" 7L, 382C written
[root@hw4test ~]# vi /etc/fstab
#
# /etc/fstab
# Created by anaconda on Sat May 12 18:50:26 2018
#
# Accessible filesystems, by reference, are maintained under '/dev/disk'
# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
#
/dev/mapper/VolGroup00-LogVol00 /                       xfs     defaults        0 0
UUID=570897ca-e759-4c81-90cf-389da6eee4cc /boot                   xfs     defaults
   0 0
/dev/mapper/VolGroup00-LogVol01 swap                    swap    defaults        0 0

#
# /etc/fstab
# Created by anaconda on Sat May 12 18:50:26 2018
#
# Accessible filesystems, by reference, are maintained under '/dev/disk'
# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
#
/dev/mapper/VolGroup00-LogVol00 /                       xfs     defaults        0 0
UUID=570897ca-e759-4c81-90cf-389da6eee4cc /boot                   xfs     defaults
   0 0
"/etc/fstab" 11L, 475C written
[root@hw4test ~]# grub2-mkconfig -o /boot/grub2/grub.cfg
/usr/sbin/grub2-probe: error: failed to get canonical path of `/dev/mapper/VolGroup00-LogVol00'.
[root@hw4test ~]# reboot 
Last login: Wed Nov  7 18:53:18 2018
[vagrant@hw4test ~]$ 
[vagrant@hw4test ~]$ sudo su -
Last login: Wed Nov  7 18:53:27 UTC 2018 on tty1
[root@hw4test ~]# uptime 
 18:55:00 up 0 min,  1 user,  load average: 1.50, 0.48, 0.17
[root@hw4test ~]# uptime 
 18:55:03 up 0 min,  1 user,  load average: 1.38, 0.47, 0.16
[root@hw4test ~]# uptime 
 18:55:04 up 0 min,  1 user,  load average: 1.38, 0.47, 0.16
[root@hw4test ~]# vgs
  VG      #PV #LV #SN Attr   VSize   VFree
  centos1   1   2   0 wz--n- <38.97g    0 
  vg_var    2   1   0 wz--n-   2.99g 1.12g
[root@hw4test ~]# 
[root@hw4test ~]# vgrename -v centos1 centos
    Wiping cache of LVM-capable devices
    Archiving volume group "centos1" metadata (seqno 8).
    Writing out updated volume group
    Renaming "/dev/centos1" to "/dev/centos"
    Loading table for centos1-LogVol00 (253:0).
    Suppressed centos1-LogVol00 (253:0) identical table reload.
    Suspending centos1-LogVol00 (253:0) with device flush
    Loading table for centos1-LogVol00 (253:0).
    Suppressed centos1-LogVol00 (253:0) identical table reload.
    Renaming centos1-LogVol00 (253:0) to centos-LogVol00
    Resuming centos-LogVol00 (253:0).
    Loading table for centos1-LogVol01 (253:1).
    Suppressed centos1-LogVol01 (253:1) identical table reload.
    Suspending centos1-LogVol01 (253:1) with device flush
    Loading table for centos1-LogVol01 (253:1).
    Suppressed centos1-LogVol01 (253:1) identical table reload.
    Renaming centos1-LogVol01 (253:1) to centos-LogVol01
    Resuming centos-LogVol01 (253:1).
    Creating volume group backup "/etc/lvm/backup/centos" (seqno 9).
  Volume group "centos1" successfully renamed to "centos"
[root@hw4test ~]# cat /etc/default/grub 
GRUB_TIMEOUT=1
GRUB_DISTRIBUTOR="$(sed 's, release .*$,,g' /etc/system-release)"
GRUB_DEFAULT=saved
GRUB_DISABLE_SUBMENU=true
GRUB_TERMINAL_OUTPUT="console"
GRUB_CMDLINE_LINUX="no_timer_check console=tty0 console=ttyS0,115200n8 net.ifnames=0 biosdevname=0 elevator=noop crashkernel=auto rd.lvm.lv=centos1/LogVol00 rd.lvm.lv=centos1/LogVol01 rhgb quiet"
GRUB_DISABLE_RECOVERY="true"
Last login: Wed Nov  7 22:11:03 2018
[root@localhost ~]# 
[root@localhost ~]# 
[root@localhost ~]# cat /usr/lib
lib/     lib64/   libexec/ 
[root@localhost ~]# cat /usr/lib/
binfmt.d/         grub/             NetworkManager/   systemd/
cpp               kbd/              polkit-1/         tmpfiles.d/
debug/            kdump/            python2.7/        tuned/
dracut/           kernel/           rpm/              udev/
firewalld/        locale/           sendmail          virtualbox/
firmware/         modprobe.d/       sendmail.postfix  yum-plugins/
games/            modules/          sse2/             
gcc/              modules-load.d/   sysctl.d/         
[root@localhost ~]# cat /usr/lib/d
debug/  dracut/ 
[root@localhost ~]# cat /usr/lib/debug/
bin/   lib/   lib64/ sbin/  usr/   
[root@localhost ~]# cat /usr/lib/dracut/modules.d/
00bash/              90dmsquash-live/     95rootfs-block/
00systemd-bootchart/ 90kernel-modules/    95ssh-client/
01test/              90livenet/           95terminfo/
03modsign/           90lvm/               95udev-rules/
03rescue/            90mdraid/            95virtfs/
04watchdog/          90multipath/         95zfcp/
05busybox/           90qemu/              95znet/
05nss-softokn/       90qemu-net/          97biosdevname/
10i18n/              91crypt-gpg/         98ecryptfs/
30convertfs/         91crypt-loop/        98pollcdrom/
40network/           95cifs/              98selinux/
45ifcfg/             95dasd/              98syslog/
45url-lib/           95dasd_mod/          98systemd/
50drm/               95debug/             98usrmount/
50plymouth/          95fcoe/              99base/
80cms/               95fcoe-uefi/         99fs-lib/
90bcache/            95fstab-sys/         99img-lib/
90btrfs/             95iscsi/             99kdumpbase/
90crypt/             95nbd/               99shutdown/
90dm/                95nfs/               99uefi-lib/
90dmraid/            95resume/            
[root@localhost ~]# cat /usr/lib/dracut/modules.d/00
00bash/              00systemd-bootchart/ 
[root@localhost ~]# cat /usr/lib/dracut/modules.d/00
00bash/              00systemd-bootchart/ 
[root@localhost ~]# cat /usr/lib/dracut/modules.d/00bash/module-setup.sh 
#!/bin/bash
# -*- mode: shell-script; indent-tabs-mode: nil; sh-basic-offset: 4; -*-
# ex: ts=8 sw=4 sts=4 et filetype=sh

check() {
    require_binaries /bin/bash
}

depends() {
    return 0
}

install() {
    # If another shell is already installed, do not use bash
    [[ -x $initdir/bin/sh ]] && return

    # Prefer bash as /bin/sh if it is available.
    inst /bin/bash && ln -sf bash "${initdir}/bin/sh"
}

[root@localhost ~]# dracut --modules
getopt: option '--modules' requires an argument
Usage: /usr/sbin/dracut [OPTION]... [<initramfs> [<kernel-version>]]

Version: 033-502.el7

Creates initial ramdisk images for preloading modules

  -h, --help  Display all options

If a [LIST] has multiple arguments, then you have to put these in quotes.

For example:

    # dracut --add-drivers "module1 module2"  ...

[root@localhost ~]# dracut --list-modules
bash
systemd-bootchart
test
modsign
rescue
watchdog
busybox
nss-softokn
i18n
convertfs
network
ifcfg
url-lib
drm
plymouth
cms
bcache
btrfs
crypt
dm
dmraid
dmsquash-live
kernel-modules
livenet
lvm
mdraid
multipath
qemu
qemu-net
crypt-gpg
crypt-loop
cifs
dasd
dasd_mod
debug
fcoe
fcoe-uefi
fstab-sys
iscsi
nbd
nfs
resume
rootfs-block
ssh-client
terminfo
udev-rules
virtfs
zfcp
znet
biosdevname
ecryptfs
pollcdrom
selinux
syslog
systemd
usrmount
base
fs-lib
img-lib
kdumpbase
shutdown
uefi-lib
[root@localhost ~]# ^C
[root@localhost ~]# cat /usr/lib/dracut/modules.d/
00bash/              50drm/               90multipath/         95nbd/               98selinux/
00systemd-bootchart/ 50plymouth/          90qemu/              95nfs/               98syslog/
01test/              80cms/               90qemu-net/          95resume/            98systemd/
03modsign/           90bcache/            91crypt-gpg/         95rootfs-block/      98usrmount/
03rescue/            90btrfs/             91crypt-loop/        95ssh-client/        99base/
04watchdog/          90crypt/             95cifs/              95terminfo/          99fs-lib/
05busybox/           90dm/                95dasd/              95udev-rules/        99img-lib/
05nss-softokn/       90dmraid/            95dasd_mod/          95virtfs/            99kdumpbase/
10i18n/              90dmsquash-live/     95debug/             95zfcp/              99shutdown/
30convertfs/         90kernel-modules/    95fcoe/              95znet/              99uefi-lib/
40network/           90livenet/           95fcoe-uefi/         97biosdevname/       
45ifcfg/             90lvm/               95fstab-sys/         98ecryptfs/          
45url-lib/           90mdraid/            95iscsi/             98pollcdrom/         
[root@localhost ~]# ll /usr/lib/dracut/modules.d/00bash/module-setup.sh 
-rwxr-xr-x. 1 root root 414 Aug  5  2017 /usr/lib/dracut/modules.d/00bash/module-setup.sh
[root@localhost ~]# ll /usr/lib/dracut/modules.d/01test/
module-setup.sh  test.sh          
[root@localhost ~]# ll /usr/lib/dracut/modules.d/01test/module-setup.sh 
-rw-r--r--. 1 root root 114 Nov  7 22:08 /usr/lib/dracut/modules.d/01test/module-setup.sh
[root@localhost ~]# ll /usr/lib/dracut/modules.d/10i18n/
10-console.rules  console_init.sh   module-setup.sh   parse-i18n.sh     README            
[root@localhost ~]# ll /usr/lib/dracut/modules.d/10i18n/module-setup.sh 
-rwxr-xr-x. 1 root root 7479 Aug  5  2017 /usr/lib/dracut/modules.d/10i18n/module-setup.sh
[root@localhost ~]# chmod -R 0755 /usr/lib/dracut/modules.d/01test/module-setup.sh
[root@localhost ~]# chmod -R 0755 /usr/lib/dracut/modules.d/01test/test.sh 
[root@localhost ~]# ll /usr/lib/dracut/modules.d/01test/module-setup.sh           
-rwxr-xr-x. 1 root root 114 Nov  7 22:08 /usr/lib/dracut/modules.d/01test/module-setup.sh
[root@localhost ~]# ll /usr/lib/dracut/modules.d/00bash/module-setup.sh           
-rwxr-xr-x. 1 root root 414 Aug  5  2017 /usr/lib/dracut/modules.d/00bash/module-setup.sh
[root@localhost ~]# ls -la /usr/lib/dracut/modules.d/
total 16
drwxr-xr-x. 64 root root 4096 Nov  7 22:07 .
drwxr-xr-x.  4 root root  236 Apr 11  2018 ..
drwxr-xr-x.  2 root root   29 Apr 11  2018 00bash
drwxr-xr-x.  2 root root   29 Apr 11  2018 00systemd-bootchart
drwxr-xr-x.  2 root root   44 Nov  7 22:09 01test
drwxr-xr-x.  2 root root   57 Apr 11  2018 03modsign
drwxr-xr-x.  2 root root   29 Apr 11  2018 03rescue
drwxr-xr-x.  2 root root   72 Apr 11  2018 04watchdog
drwxr-xr-x.  2 root root   29 Apr 11  2018 05busybox
drwxr-xr-x.  2 root root   29 Apr 11  2018 05nss-softokn
drwxr-xr-x.  2 root root  111 Apr 11  2018 10i18n
drwxr-xr-x.  2 root root   72 Apr 11  2018 30convertfs
drwxr-xr-x.  2 root root 4096 Apr 11  2018 40network
drwxr-xr-x.  2 root root   51 Apr 11  2018 45ifcfg
drwxr-xr-x.  2 root root   47 Apr 11  2018 45url-lib
drwxr-xr-x.  2 root root   29 Apr 11  2018 50drm
drwxr-xr-x.  2 root root  150 Apr 11  2018 50plymouth
drwxr-xr-x.  2 root root   92 Apr 11  2018 80cms
drwxr-xr-x.  2 root root   29 Apr 11  2018 90bcache
drwxr-xr-x.  2 root root  129 Apr 11  2018 90btrfs
drwxr-xr-x.  2 root root  195 Apr 11  2018 90crypt
drwxr-xr-x.  2 root root  130 Apr 11  2018 90dm
drwxr-xr-x.  2 root root   93 Apr 11  2018 90dmraid
drwxr-xr-x.  2 root root  258 Apr 11  2018 90dmsquash-live
drwxr-xr-x.  2 root root   73 Apr 11  2018 90kernel-modules
drwxr-xr-x.  2 root root  102 Apr 11  2018 90livenet
drwxr-xr-x.  2 root root   88 Apr 11  2018 90lvm
drwxr-xr-x.  2 root root 4096 Apr 11  2018 90mdraid
drwxr-xr-x.  2 root root  110 Apr 11  2018 90multipath
drwxr-xr-x.  2 root root   29 Apr 11  2018 90qemu
drwxr-xr-x.  2 root root   29 Apr 11  2018 90qemu-net
drwxr-xr-x.  2 root root   53 Apr 11  2018 91crypt-gpg
drwxr-xr-x.  2 root root   54 Apr 11  2018 91crypt-loop
drwxr-xr-x.  2 root root   92 Apr 11  2018 95cifs
drwxr-xr-x.  2 root root   50 Apr 11  2018 95dasd
drwxr-xr-x.  2 root root   54 Apr 11  2018 95dasd_mod
drwxr-xr-x.  2 root root   29 Apr 11  2018 95debug
drwxr-xr-x.  2 root root  151 Apr 11  2018 95fcoe
drwxr-xr-x.  2 root root   54 Apr 11  2018 95fcoe-uefi
drwxr-xr-x.  2 root root   49 Apr 11  2018 95fstab-sys
drwxr-xr-x.  2 root root  119 Apr 11  2018 95iscsi
drwxr-xr-x.  2 root root   71 Apr 11  2018 95nbd
drwxr-xr-x.  2 root root  139 Apr 11  2018 95nfs
drwxr-xr-x.  2 root root   69 Apr 11  2018 95resume
drwxr-xr-x.  2 root root  120 Apr 11  2018 95rootfs-block
drwxr-xr-x.  2 root root   29 Apr 11  2018 95ssh-client
drwxr-xr-x.  2 root root   29 Apr 11  2018 95terminfo
drwxr-xr-x.  2 root root  122 Apr 11  2018 95udev-rules
drwxr-xr-x.  2 root root  102 Apr 11  2018 95virtfs
drwxr-xr-x.  2 root root   50 Apr 11  2018 95zfcp
drwxr-xr-x.  2 root root   49 Apr 11  2018 95znet
drwxr-xr-x.  2 root root   57 Apr 11  2018 97biosdevname
drwxr-xr-x.  2 root root   68 Apr 11  2018 98ecryptfs
drwxr-xr-x.  2 root root   49 Apr 11  2018 98pollcdrom
drwxr-xr-x.  2 root root   58 Apr 11  2018 98selinux
drwxr-xr-x.  2 root root  191 Apr 11  2018 98syslog
drwxr-xr-x.  2 root root 4096 Apr 11  2018 98systemd
drwxr-xr-x.  2 root root   49 Apr 11  2018 98usrmount
drwxr-xr-x.  2 root root  173 Apr 11  2018 99base
drwxr-xr-x.  2 root root   46 Apr 11  2018 99fs-lib
drwxr-xr-x.  2 root root   47 Apr 11  2018 99img-lib
drwxr-xr-x.  2 root root  227 Apr 11  2018 99kdumpbase
drwxr-xr-x.  2 root root   48 Apr 11  2018 99shutdown
drwxr-xr-x.  2 root root   48 Apr 11  2018 99uefi-lib
[root@localhost ~]# reboot 
Last login: Wed Nov  7 22:15:08 2018 from 192.168.109.1
[root@localhost ~]# cat /etc/grub.d/41_custom 
#!/bin/sh
cat <<EOF
if [ -f  \${config_directory}/custom.cfg ]; then
  source \${config_directory}/custom.cfg
elif [ -z "\${config_directory}" -a -f  \$prefix/custom.cfg ]; then
  source \$prefix/custom.cfg;
fi
EOF

[root@localhost ~]# vi /usr/lib/dracut/modules.d/00
00bash/              00systemd-bootchart/ 
[root@localhost ~]# vi /usr/lib/dracut/modules.d/00bash/module-setup.sh 
#!/bin/bash
# -*- mode: shell-script; indent-tabs-mode: nil; sh-basic-offset: 4; -*-
# ex: ts=8 sw=4 sts=4 et filetype=sh

check() {
    require_binaries /bin/bash
}

depends() {
    return 0
}

install() {
    # If another shell is already installed, do not use bash
    # Prefer bash as /bin/sh if it is available.
    inst /bin/bash && ln -sf bash "${initdir}/bin/sh"
}

#!/bin/bash
# -*- mode: shell-script; indent-tabs-mode: nil; sh-basic-offset: 4; -*-
# ex: ts=8 sw=4 sts=4 et filetype=sh

check() {
    require_binaries /bin/bash
}

depends() {
    return 0
}

install() {
    # If another shell is already installed, do not use bash
    [[ -x $initdir/bin/sh ]] && return

    # Prefer bash as /bin/sh if it is available.
    inst /bin/bash && ln -sf bash "${initdir}/bin/sh"
}

[root@localhost ~]# vi /usr/lib/dracut/modules.d/00bash/module-setup.sh 
#!/bin/bash
# -*- mode: shell-script; indent-tabs-mode: nil; sh-basic-offset: 4; -*-
# ex: ts=8 sw=4 sts=4 et filetype=sh

check() {
    require_binaries /bin/bash
}

depends() {
    return 0
}

install() {
    # If another shell is already installed, do not use bash
    # Prefer bash as /bin/sh if it is available.
    inst /bin/bash && ln -sf bash "${initdir}/bin/sh"
}

#!/bin/bash
# -*- mode: shell-script; indent-tabs-mode: nil; sh-basic-offset: 4; -*-
# ex: ts=8 sw=4 sts=4 et filetype=sh

"/usr/lib/dracut/modules.d/00bash/module-setup.sh" 26L, 674C written
[root@localhost ~]# reboot 
Last login: Wed Nov  7 22:37:12 2018 from 192.168.109.1
[root@localhost ~]# vi /usr/lib/dracut/modules.d/00bash/module-setup.sh ^C
[root@localhost ~]# еxit
-bash: $'\345xit': command not found
[root@localhost ~]# exit
logout
